#!/bin/bash
#SBATCH --nodes=6
#SBATCH --time=00:40:00
#SBATCH --job-name=job1
#SBATCH --error=$HOME/code/otm-mpi-experiments/jobs/1/std_error
#SBATCH --output=$HOME/code/otm-mpi-experiments/jobs/1/std_out
#SBATCH --mail-user=gomes@berkeley.edu
#SBATCH --mail-type=ALL,TIME_LIMIT
#SBATCH --constraint=haswell
#SBATCH --qos=regular
#SBATCH --license=SCRATCH
#SBATCH --output=my_job.o%j
mpiexec -N 1 -n 1 java -cp $OTMSIMJAR:$OTMMPIHOME/lib/*:$OTMMPIHOME/out_mpijavac runner/RunnerMPI $HOME/code/otm-mpi-experiments/split_files/2500/1/2500_1 2 1000 false &
mpiexec -N 1 -n 2 java -cp $OTMSIMJAR:$OTMMPIHOME/lib/*:$OTMMPIHOME/out_mpijavac runner/RunnerMPI $HOME/code/otm-mpi-experiments/split_files/2500/2/2500_2 2 1000 false &
mpiexec -N 1 -n 4 java -cp $OTMSIMJAR:$OTMMPIHOME/lib/*:$OTMMPIHOME/out_mpijavac runner/RunnerMPI $HOME/code/otm-mpi-experiments/split_files/2500/4/2500_4 2 1000 false &
mpiexec -N 1 -n 8 java -cp $OTMSIMJAR:$OTMMPIHOME/lib/*:$OTMMPIHOME/out_mpijavac runner/RunnerMPI $HOME/code/otm-mpi-experiments/split_files/2500/8/2500_8 2 1000 false &
mpiexec -N 1 -n 16 java -cp $OTMSIMJAR:$OTMMPIHOME/lib/*:$OTMMPIHOME/out_mpijavac runner/RunnerMPI $HOME/code/otm-mpi-experiments/split_files/2500/16/2500_16 2 1000 false &
mpiexec -N 2 -n 32 java -cp $OTMSIMJAR:$OTMMPIHOME/lib/*:$OTMMPIHOME/out_mpijavac runner/RunnerMPI $HOME/code/otm-mpi-experiments/split_files/2500/32/2500_32 2 1000 false &
mpiexec -N 3 -n 64 java -cp $OTMSIMJAR:$OTMMPIHOME/lib/*:$OTMMPIHOME/out_mpijavac runner/RunnerMPI $HOME/code/otm-mpi-experiments/split_files/2500/64/2500_64 2 1000 false &
mpiexec -N 5 -n 128 java -cp $OTMSIMJAR:$OTMMPIHOME/lib/*:$OTMMPIHOME/out_mpijavac runner/RunnerMPI $HOME/code/otm-mpi-experiments/split_files/2500/128/2500_128 2 1000 false &
wait
